import{r as o,u as h,j as e,m as f,L as y,d as j}from"./index-BTZHfU8o.js";const{div:w}=f,N=()=>{const[t,x]=o.useState({email:"",password:""}),[i,r]=o.useState(""),[l,d]=o.useState(!1),n=h();o.useEffect(()=>{sessionStorage.getItem("authToken")&&n("/dashboard")},[n]);const c=a=>{x({...t,[a.target.name]:a.target.value})},g=async a=>{var m,u;a.preventDefault(),d(!0),r("");try{const s=await j.post("http://localhost:3000/api/auth/login-user",{email:t.email,password:t.password});if(s.data.success){window.alert("Login Successfully!");const b=s.data.token,p=s.data.id;sessionStorage.setItem("authToken",b),localStorage.setItem("keepLoggedIn",JSON.stringify(!0)),localStorage.setItem("userId",p),console.log("Token Stored:",sessionStorage.getItem("authToken")),n("/dashboard")}else r("Login Failed: "+(s.data.message||"Invalid credentials"))}catch(s){r("Login Error: "+(((u=(m=s.response)==null?void 0:m.data)==null?void 0:u.message)||"An error occurred"))}finally{d(!1)}};return e.jsx("div",{className:"min-h-[calc(100vh-65px)] flex items-center justify-center bg-gradient-to-r from-blue-50 to-amber-50 px-4",children:e.jsxs(w,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[e.jsxs("h2",{className:"text-3xl font-extrabold text-blue-900 mb-6 text-center",children:["Login to ",e.jsx("span",{className:"text-amber-500",children:"HomeConnect"})]}),i&&e.jsx("div",{className:"text-red-500 text-sm mb-4",children:i}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-blue-900",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:c,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-blue-900",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:t.password,onChange:c,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),e.jsx("button",{type:"submit",className:"w-full bg-amber-500 text-white py-2 rounded-xl font-semibold hover:bg-amber-600 transition-colors",disabled:l,children:l?"Logging In...":"Login"})]}),e.jsxs("p",{className:"mt-5 text-sm text-center text-blue-900",children:["Don't have an account?"," ",e.jsx(y,{to:"/register",className:"text-amber-500 hover:underline font-semibold",children:"Register"})]})]})})};export{N as default};
